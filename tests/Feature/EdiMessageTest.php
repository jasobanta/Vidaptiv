<?php

namespace Tests\Feature;

use Illuminate\Foundation\Testing\RefreshDatabase;
use Illuminate\Foundation\Testing\WithFaker;
use Tests\TestCase;
use App\Models\User;

class EdiMessageTest extends TestCase {

    /**
     * A basic feature test example.
     *
     * @return void
     */
    public function test_example() {
        $edimessage = "UNB+UNOC:4+ECW+TEST+20210429:1331+0'
UNG+IFTMIN+ECW+TEST+20210429:1331+0+UN+D:99A:DEBL02'
UNH+0+IFTMIN:D:99A:UN:DEBL02'
BGM+705+1301315 +5'
CTA+MS+:Nicolas Malfeyt'
COM+nicolasm@ecutech.net:EM'
DTM+137:202104291331:203'
FTX+AAS+++EXPRESS B/L:FREIGHT PREPAID:SHIPPED ON BOARD:PO 9700144264:LESS THAN CONTAINER'
FTX+AAS+++PORT TO PORT:LCL/LCL:SERVICE CONTRACT NO. FAK TARIEVEN:NOTIFY PARTY CONTINUED?::T?: ?+27 11 923 4200 D?: ?+27 11 923'
FTX+AAS+++4230 F?: ?+27 11 923 4280:JANE.RALSTON@GO2TIGERS.COM'
FTX+AEA++9'
CNT+7:1701.351:KGM' 
CNT+11:4:NMP' 
CNT+15:7.656:MTQ'
DOC+710+++1+0'
LOC+57+:::ANTWERP'
LOC+91+:::ANTWERP'
RFF+ERN:BDP 1166654851'
RFF+FF:1301315 '
TDT+20+NZ116A+1+13+:172:20+++:103:11:MSC BRANKA:PT'
DTM+133:20210505:102'
DTM+132:20210601:102'
LOC+9+BEANR:::ANTWERP'
LOC+12+ZADUR:::DURBAN'
NAD+CZ++ASHLAND INDUSTRIES EUROPE GMBH RHEI:NWEG 11 8200 SCHAFFHAUSEN SWITZERLA:ND VAT CHE 112.297.540'
NAD+CN++SANOFI INDUSTRIES SOUTH AFRICA (PTY:) LTD 315 WALTLOO ROAD 0184 WALTLOO: PRETORIA SOUTH AFRICA'
NAD+N1++LWWW FREIGHT - TIGERS GLOBAL LOGIST:ICS 111 KOORNHOF ROAD MEADOWDALE, J:OHANNESBURG GAUTENG, SOUTH AFRICA J:ANE RALSTON'
GID+1+4:PLT:::PALLETS STC'
PIA+5+3912398540::169'
FTX+AAA+++SLAC 83 BOXES:BENECEL E10M PHARM CR BOX:18.14KG:COUNTRY OF ORIGIN -:BELGIUM'
FTX+AAA+++NON-HAZARDOUS MATERIAL:NET WEIGHT ?:1505.6200 KGS'
MEA+WT+AAE+KGM:1701.351'
MEA+VOL+AAW+MTQ:7.656'
RFF+BN:INTTRA2009480421'
RFF+EQ:MSDU7395345'
RFF+SRN:0'
PCI++SANOFI:INDUSTRIES SOUTH:AFRICA (PTY) LTD:PO 9700144264 DN:852295488 SO:8534678'
SGP+MSDU7395345'
EQD+CN+MSDU7395345+45G1'
SEL+332571+SH'
MEA+AAE+WT+KGM:1701.351' 
UNT+39+0'
UNE+1+0'
UNZ+1+0'";

        $user = User::select('api_token')->where('id', 1)->first();

        $response = $this->post('/api/edimessage', [
            'api_token' => $user->api_token,
            'edimessage' => $edimessage,
        ]);

        $response->assertStatus(200);
    }

}
